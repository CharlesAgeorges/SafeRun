# Seed de test : Sete (6 Quai Louis Pasteur) -> Usine Listel
# Usage: rails runner db/seeds/runs_test.rb

user = User.find_by(email: "test@mail.com") || User.first
abort "Aucun utilisateur. Cree d'abord un utilisateur." unless user

puts "Creation du run Sete -> Listel pour #{user.email}..."

run = Run.create!(
  user: user,
  duration: 2400,
  distance: 6.0,
  status: "ended",
  start_point: "6 Quai Louis Pasteur, 34200 Sete",
  start_point_lat: 43.40695835292269,
  start_point_lng: 3.698956726932721,
  started_at: 1.day.ago,
  ended_at: 1.day.ago + 40.minutes
)

# Points GPS extraits de Google Maps (parcours reel)
positions = [
  [43.40695835292269, 3.698956726932721],
  [43.40412040121782, 3.6968935456275074],
  [43.400442857590306, 3.696260836693909],
  [43.396065490242236, 3.6951604733311294],
  [43.3931848447357, 3.691770943630418],
  [43.39257635946037, 3.687393100241184],
  [43.39370792369188, 3.6797832920534015],
  [43.39270446212765, 3.673598486619685],
  [43.39398547397298, 3.666032750712067],
  [43.39314214423847, 3.6601270695131274],
  [43.391905058503326, 3.6571162648743303],
  [43.390261031981105, 3.6528265659828664],
  [43.38862763674436, 3.649183260217165],
  [43.38491229940384, 3.643865208938418],
  [43.38186019950345, 3.638709013304566],
  [43.37841139120095, 3.633508488031345],
  [43.37690581273485, 3.630820080925525]
]

positions.each { |lat, lng| run.positions.create!(latitude: lat, longitude: lng) }

puts "Run ##{run.id} cree avec #{positions.length} positions"
puts "#{run.user_id}"
puts "URL: /runs/#{run.id}"

puts "Creation du run Noisy-Le-Sec -> Paris-Jaurès pour #{user.email}..."

run = Run.create!(
  user: user,
  duration: 90,
  distance: 10,
  status: "ended",
  start_point: "30 avenue de Verdun, 93130 Noisy-Le-Sec",
  start_point_lat: 48.895968732297064,
  start_point_lng: 2.4570580705585474,
  started_at: 2.day.ago,
  ended_at: 2.day.ago + 90.minutes
)

positions = [
  [48.89618738845664, 2.457315562614759],
  [48.896199731921016, 2.4582382424828513],
  [48.89622618219802, 2.459992407176956],
  [48.896243815703926, 2.4605476244231625],
  [48.896390173566694, 2.460976777872746],
  [48.89755925772208, 2.4623366578380135],
  [48.897915443849904, 2.462355433316383],
  [48.900364595518745, 2.464316128105304],
  [48.90052328371995, 2.4649947270143007],
  [48.90062086411905, 2.464975382263283],
  [48.901012292070305, 2.4642350926016747],
  [48.90219713639066, 2.4637120618455],
  [48.90249510622107, 2.463647688828183],
  [48.9035723669044, 2.4630978359823392],
  [48.90364641670307, 2.463154162369636],
  [48.90421236512735, 2.4628913058797446],
  [48.90390382706971, 2.4628832592529877],
  [48.90246630412155, 2.455779776230745],
  [48.90104264250941, 2.4486333884838576],
  [48.90053300719788, 2.446147469112535],
  [48.89968293319459, 2.442454021728372],
  [48.89916613587678, 2.4398509104758155],
  [48.89856639006498, 2.4368519198217515],
  [48.89831577986512, 2.4357911430729065],
  [48.8980730879957, 2.4344913321531707],
  [48.898062191814915, 2.4341084580121866],
  [48.89706982410167, 2.429130714746558],
  [48.89681048923434, 2.427519660044454],
  [48.8965458205821, 2.4254614785207123],
  [48.89657306184624, 2.425362030704107],
  [48.896466202363435, 2.4252008207930236],
  [48.89596862247697, 2.417592234732742],
  [48.895387207587845, 2.415116225192544],
  [48.8951439383083, 2.411631010867666],
  [48.895249741539224, 2.410134338217291],
  [48.89506292607524, 2.409603418658547],
  [48.89531105449094, 2.4061455207575824],
  [48.89562748973926, 2.4036097699390493],
  [48.89562333119893, 2.4036118784133027],
  [48.89590839353229, 2.4011540437669496],
  [48.8958986903255, 2.400793494669601],
  [48.89593888931202, 2.3999058269636633],
  [48.89582799547555, 2.3997434744461437],
  [48.89578086551917, 2.3964837731215374],
  [48.895635316848235, 2.3948960920086506],
  [48.895317880656016, 2.3938017938307006],
  [48.894083895806766, 2.391098694466705],
  [48.89257610280328, 2.3880946098428373],
  [48.891668892374966, 2.386599849018753],
  [48.8913999514167, 2.3861148999037667],
  [48.89113932684961, 2.3855540457523348],
  [48.88994642298657, 2.383180432805259],
  [48.888235495544805, 2.3797440043668825],
  [48.88789167086871, 2.379840994170769],
  [48.88750624922417, 2.378999267219207],
  [48.88761195578584, 2.378710657039935],
  [48.88670227447339, 2.3768985833449463],
  [48.885967304548416, 2.375431481560252],
  [48.885187307774046, 2.373864377620676],
  [48.88459939192987, 2.372677470650597],
  [48.88399752948998, 2.371474988939707],
]
positions.each { |lat, lng| run.positions.create!(latitude: lat, longitude: lng) }

puts "Run ##{run.id} cree avec #{positions.length} positions"
puts "#{run.user_id}"
puts "URL: /runs/#{run.id}"



puts "Creating touristic run in Avallon..."

user = User.find_by(email: "mail@mail.com") || User.first

avallon_run = Run.create!(
  user: user,
  duration: 2280,
  distance: 6.2,
  status: "ended",
  start_point: "Place Vauban, Avallon",
  start_point_lat: 47.4897,
  start_point_lng: 3.9076,
  started_at: 3.days.ago.change(hour: 9, min: 30),
  ended_at: 3.days.ago.change(hour: 10, min: 8)
)

positions = [
  [47.4897, 3.9076],
  [47.4893, 3.9082],
  [47.4889, 3.9089],
  [47.4885, 3.9095],
  [47.4879, 3.9101],
  [47.4875, 3.9107],
  [47.4871, 3.9102],
  [47.4865, 3.9095],
  [47.4858, 3.9088],
  [47.4852, 3.9082],
  [47.4847, 3.9075],
  [47.4843, 3.9065],
  [47.4840, 3.9053],
  [47.4838, 3.9040],
  [47.4841, 3.9025],
  [47.4846, 3.9012],
  [47.4852, 3.9002],
  [47.4860, 3.8995],
  [47.4868, 3.8990],
  [47.4877, 3.8988],
  [47.4886, 3.8992],
  [47.4894, 3.8998],
  [47.4901, 3.9008],
  [47.4906, 3.9022],
  [47.4908, 3.9038],
  [47.4905, 3.9050],
  [47.4902, 3.9062],
  [47.4899, 3.9070],
  [47.4897, 3.9076]
]

positions.each { |lat, lng| run.positions.create!(latitude: lat, longitude: lng) }

puts "Run ##{run.id} créé avec #{positions.length} positions"
puts "URL: /runs/#{run.id}"
